<!DOCTYPE html>

<script> //custom commands for dev test stuff
const dev = {
  //add hotdogs
    add(hotdogDevAdd) {
      hotdogs = hotdogs + hotdogDevAdd;
      console.log('Hotdogs set to ' + hotdogs);
    },
    //set new hps
    setHPS(hpsDevSet)  {
      hps = hpsDevSet;
      console.log('HPS set to ' + hps);
    }, //set new hpc
    setHPC(hpcDevSet) {
      hpc = hpcDevSet;
      console.log('HPC set to ' + hpc);
    },
    save() {
      save();
      console.log('Game saved');
    }
};

</script>

<script>
  //js section for variables
  // variables for the game (buildings, buildings hps, hpc)
  var hotdogs = 0;
  var hpc = 0;
  var hps = 0;
  var vendorHPS = 2;
  var vendors = 0;
  var hotdogStore = 0;
  var hotdogStoreHPS = 10;
  var factory = 0;
	var factoryHPS = 20;
  var carnival = 0;
  var carnivalHPS = 100;
  var plant = 0;
  var plantHPS = 500;
	
</script>

<script>//js section for buying sales things
function buyVendor(){
  if (hotdogs >= ((vendors+1) * 12)){
    hotdogs = hotdogs - ((vendors+1) * 12);
    vendors = vendors + 1;
    hps = hps + vendorHPS;
    update();
  }
}

function buyStore(){
  if (hotdogs >= (hotdogStore+1) * 50){
    hotdogs = hotdogs - ((hotdogStore+1) * 50);
    hotdogStore = hotdogStore + 1;
    hps = hps + hotdogStoreHPS;
    update();
  }
}

function buyFactory() {
  if (hotdogs >= ((factory+1) * 100)){
    hotdogs = hotdogs - ((factory + 1) *100);
    factory = factory + 1;
    hps = hps + factoryHPS;
    update();
  }
 } 

 function buyCarnival() {
   if (hotdogs >= ((carnival+1) * 500)){
     hotdogs = hotdogs - ((carnival + 1) * 500);
     carnival = carnival + 1;
     hps = hps + carnivalHPS;
     update();
   }
 }

 function buyPlant() {
   if (hotdogs >= (plant+1) * 15000){
     hotdogs = hotdogs - ((plant+1) * 15000);
     plant = plant + 1;
     hps = hps + plantHPS;
     update();
   }
 }
</script>

<script>
  //js section for functions
  // script for functions

  // function to start the game
  function startGame() {
    hotdogs = 0;
    document.getElementById("amount").value = "0 hotdogs";
    document.getElementById("hps").value = "0 Hotdogs per second";
    document.getElementById("hpc").value = "1 hotdog per click";
    document.title = hotdogs + " hotdogs";
  }

  // the function for adding hotdogs
  function add() {
    hotdogs = hotdogs + hpc;
    Math.round(hpc);
    Math.round(hotdogs);
    update();
  }

  // timer for adding the dogs
  function timer() {
		hotdogs = hotdogs + hps;
    Math.round(hpc);
    Math.round(hotdogs);
    hpc = ((hps*0.1)+1);
    // Disabled: save();
    update();
  }

  //update the stuff
  function update() {
    Math.round(hpc);
    Math.round(hotdogs);
    document.getElementById("amount").value = Math.round(hotdogs) + " hotdogs";
    document.getElementById("hps").value = Math.round(hps) + " Hotdogs per second";
    document.getElementById("hpc").value = Math.round(hpc) + " hotdogs per click";
    document.title = Math.round(hotdogs) + " hotdogs";
    document.getElementById('amountVendor').innerHTML = "You own " + vendors + " hotdog street vendors.";
    document.getElementById('costVendor').innerHTML = "Costs " + ((vendors+1) * 12) + " Hotdogs.";
    document.getElementById('amountStore').innerHTML = "You own " + hotdogStore + " hotdog stores.";
    document.getElementById('costStore').innerHTML = "Costs " + ((hotdogStore+1) * 50) + " Hotdogs.";
    document.getElementById('amountFactory').innerHTML = "You own " + factory + " hotdog factories.";
    document.getElementById('costFactory').innerHTML = "Costs " + ((factory+1) * 100) + " Hotdogs.";
    document.getElementById('amountCarnival').innerHTML = "You own " + carnival + " hotdog carnivals.";
    document.getElementById('costCarnival').innerHTML = "Costs " + ((carnival+1) * 500) + " Hotdogs.";
    document.getElementById('amountPlant').innerHTML = "You own " + plant + " Hotdog Nuclear Power Plants.";
    document.getElementById('costPlant').innerHTML = "Costs " + (plant+1) * 15000 + " Hotdogs.";

  }
  setInterval(timer, 1000);
  
</script>

<html lang="en">
  <!html portion of the code!>
  <title>Hotdog Clicker</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <body>
    <h1><font color="red">Hotdog Clicker</font></h1>
    <head>
      <title>0 hotdogs</title>
      <input type="text" id="amount" disabled style="text-align: center;" />
      <input type="text" id="hps" disabled style="text-align: center;" />
      <input type="text" id="hpc" disabled style="text-align: center;" />
      <button><div style="text-align:center"></div><a href="#" onClick="save()" id="saveButton" download="hotdogSave.hotdog">Save</a></button>
      
	  <br><br>
      <input type="file" name="file" id="file"> <!-- TODO: Rename to "Upload Save file"-->
      <button onclick="load()" name="submit">Load Save</button>
     
     
      <nav class = "nav">
        <li class="nav"><a href="new.html">What's New</a></li>
        <li class="nav"><a href="https://tvw3fj.csb.app">Hotdog Clicker (Test Branch)</a></li>
    </nav>


    </head>
    <button id="btn">
      Click the Hotdog
      <img
        src="https://th.bing.com/th/id/R.f92425fc6ed1701e750c84c9cb800d5b?rik=lhmtvijyVU2qPQ&pid=ImgRaw&r=0"
        alt="image not found"
      />
    </button>

    <script>
      // another js section, this time actually running the game
      startGame(); // start the game
      console.log("Game is up and working"); //log that its working

      let btn = document.querySelector("#btn"); //button for hotdog
      btn.onclick = (event) => {
        //button click event
        add(); //add hotdog for the click
        console.log("Hotdog has been Clicked"); //write in log its clicked
        console.log("Gamer now has " + hotdogs + " hotdogs. "); //tell how many dogs they have now
      };
    </script>
    
    <script>
      //js section for saving and loading functions

      //function for save
function save() {
    // saveFile variable stores the data for the game variables
	  // TODO: Add encryption to the game save to prevent dubious hotdog cheating

    var saveFile = "";
		
    saveFile += "{"            + "\n";
    saveFile += '"hotdogs": '  + hotdogs     + ",\n";
    saveFile += '"hps": '      + hps         + ",\n";
    saveFile += '"vendors": '  + vendors     + ",\n";
    saveFile += '"factory": '  + factory     + ",\n";
    saveFile += '"hpc": '      + hpc         + ",\n";
    saveFile += '"stores": '   + hotdogStore + ",\n";
    saveFile += '"carnival": ' + carnival    + ",\n";
    saveFile += '"plant": '    + plant       + "\n";
    saveFile += "}";
    
    // Even though the file format pretty much follows the same conventions as a json file, the extenstion hotdog is too funny
    saveButton.href="data:text/plain," + encodeURIComponent(saveFile);
		saveButton.click();
}
      // function for load
      function load() {
      	var fileToLoad = document.getElementById("file").files[0];
        const fileReader = new FileReader();
        fileReader.addEventListener("load", function () {
          var fileText = fileReader.result;
          
          // Load the .hotdog file by parsing the json
          var jsonHotdog = JSON.parse(fileReader.result)
          
          hotdogs      = jsonHotdog.hotdogs;
          hps          = jsonHotdog.hps;
          vendors      = jsonHotdog.vendors;
          factory      = jsonHotdog.factory;
          hpc          = jsonHotdog.hpc;
          hotdogStore  = jsonHotdog.stores;
          carnival     = jsonHotdog.carnival;
          plant        = jsonHotdog.plant;
				}, false);
        
        fileReader.readAsText(fileToLoad);
        
        update();
      }
    </script>

    <!-- another html section, buttons for upgrades -->

    <p><font color = "red"> Hotdog Making Stuff</font></p>

    <!-- vendor -->
    <button><a onClick="buyVendor()">
    <img src = "https://thumbs.dreamstime.com/b/new-york-street-vendor-hot-dog-vendors-streets-city-55794767.jpg"
    alt = "vendor not found" width = "190px" height = "100px"></a>
    </button>
    <p> Buy One Hotdog Street Vendor</p>
    <p id="costVendor"> Hotdogs</p>
    <p id="amountVendor">You own 0 vendors.</p>
   

    <!-- store -->
    <button><a onClick="buyStore()">
    <img src = "https://upload.wikimedia.org/wikipedia/commons/9/98/Pinks_Hot_Dogs.jpg"
    alt = "store not found" width = "190px" height = "100px"></a>
    </button>
    <p> Buy One Hotdog Store </p>
    <p id="costStore"> Hotdogs</p>
    <p id="amountStore">You own 0 stores.</p>


    <!--factory -->
    <button><a onClick="buyFactory()">
    <img src = "https://i.ytimg.com/vi/BMgkh6at17A/maxresdefault.jpg"
    alt = "factory not found" width = "190px" height = "100px"></a>
    </button>
    <p> Buy One Hotdog Factory</p>
    <p id="costFactory"> Factory</p>
    <p id="amountFactory"> You own 0 factories.</p>


    <!-- carnival -->
    <button><a onClick="buyCarnival()">
      <img src = "https://images.fineartamerica.com/images-medium-large-5/carnival-hot-dog-on-a-stick-jason-o-watson.jpg"
      alt = "carnival not found" width = "190px" height = "100px"></a>
    </button>
    <p> Buy One Hotdog Carnival</p>
    <p id="costCarnival"> Carnival</p>
    <p id="amountCarnival"> You own 0 Carnivals.</p>


    <!-- plant -->
    <button><a onClick="buyPlant()">
      <img src = "https://cdn.mos.cms.futurecdn.net/quot7kNm69aWtc7RqkU5xE-1200-80.jpg"
      alt = "plant not found" width = "190px" height = "100px"></a>
    </button>
    <p> Buy One Hotdog Nuclear Power Plant</p>
    <p id="costPlant"> Hotdog Nuclear Power Plant</p>
    <p id="amountPlant"> You own 0 Hotdog Nuclear Plants.</p>


  </body>
</html>
